"use strict";(self.webpackChunkoxperta_simulator=self.webpackChunkoxperta_simulator||[]).push([[764],{1764:(z,y,r)=>{r.r(y),r.d(y,{DebtUnifierSimulatorModule:()=>G});var u=r(9808),n=r(2382);const x=["Indefinido","Temporal","Aut\xf3nomo","Funcionario","Desempleado","Pensionista"];var A=r(3208),I=r(8675),_=r(4004),t=r(4893);function S(e,a){1&e&&(t.TgZ(0,"div",9)(1,"mat-form-field")(2,"p",10),t._uU(3,"\xbfCu\xe1nto te queda por pagar de hipoteca?"),t.qZA(),t._UZ(4,"input",11),t.TgZ(5,"span",12),t._uU(6,"\u20ac"),t.qZA(),t.TgZ(7,"mat-error"),t._uU(8,"Este campo es requerido"),t.qZA()(),t.TgZ(9,"mat-form-field")(10,"p",10),t._uU(11,"\xbfCu\xe1nto pagas al mes de hipoteca?"),t.qZA(),t._UZ(12,"input",13),t.TgZ(13,"span",12),t._uU(14,"\u20ac"),t.qZA(),t.TgZ(15,"mat-error"),t._uU(16,"Este campo es requerido"),t.qZA()(),t.TgZ(17,"mat-form-field")(18,"p",10),t._uU(19,"\xbfCu\xe1l es el valor de tu vivienda?"),t.qZA(),t._UZ(20,"input",14),t.TgZ(21,"span",12),t._uU(22,"\u20ac"),t.qZA(),t.TgZ(23,"mat-error"),t._uU(24,"Este campo es requerido"),t.qZA()()())}function q(e,a){1&e&&(t.TgZ(0,"div",9)(1,"mat-form-field")(2,"p",10),t._uU(3,"\xbfCu\xe1nto te queda por pagar de otros pr\xe9stamos?"),t.qZA(),t._UZ(4,"input",15),t.TgZ(5,"span",12),t._uU(6,"\u20ac"),t.qZA(),t.TgZ(7,"mat-error"),t._uU(8,"Este campo es requerido"),t.qZA()(),t.TgZ(9,"mat-form-field")(10,"p",10),t._uU(11,"\xbfCu\xe1nto pagas al mes de otros pr\xe9stamos?"),t.qZA(),t._UZ(12,"input",16),t.TgZ(13,"span",12),t._uU(14,"\u20ac"),t.qZA(),t.TgZ(15,"mat-error"),t._uU(16,"Este campo es requerido"),t.qZA()()())}function D(e,a){if(1&e&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function M(e,a){if(1&e&&(t.TgZ(0,"div",9)(1,"mat-form-field")(2,"p",10),t._uU(3,"Edad del titular"),t.qZA(),t._UZ(4,"input",17),t.TgZ(5,"span",12),t._uU(6,"a\xf1os"),t.qZA(),t.TgZ(7,"mat-error"),t._uU(8,"Este campo es requerido"),t.qZA(),t.TgZ(9,"mat-error"),t._uU(10,"Edad m\xe1xima 99"),t.qZA(),t.TgZ(11,"mat-error"),t._uU(12,"Edad m\xednima 18"),t.qZA()(),t.TgZ(13,"mat-form-field")(14,"p",10),t._uU(15,"Ingresos mensuales netos de la unidad familiar"),t.qZA(),t._UZ(16,"input",18),t.TgZ(17,"span",12),t._uU(18,"\u20ac"),t.qZA(),t.TgZ(19,"mat-error"),t._uU(20,"Este campo es requerido"),t.qZA()(),t.TgZ(21,"mat-form-field")(22,"p",10),t._uU(23,"N\xba de pagas al a\xf1o"),t.qZA(),t._UZ(24,"input",19),t.TgZ(25,"mat-error"),t._uU(26,"Este campo es requerido"),t.qZA()(),t.TgZ(27,"mat-form-field",20)(28,"p",10),t._uU(29,"Tipo de Contrato"),t.qZA(),t._UZ(30,"input",21),t.TgZ(31,"mat-autocomplete",22,23),t.YNc(33,D,2,2,"mat-option",24),t.ALo(34,"async"),t.qZA(),t.TgZ(35,"mat-error"),t._uU(36,"Este campo es requerido"),t.qZA()()()),2&e){const o=t.MAs(32),i=t.oxw();t.xp6(30),t.Q6J("matAutocomplete",o),t.xp6(3),t.Q6J("ngForOf",t.lcZ(34,2,i.filteredContractType))}}function N(e,a){1&e&&(t.ynx(0),t._uU(1,"La operaci\xf3n es viable \u{1f44d}"),t.BQk())}function F(e,a){1&e&&(t.ynx(0),t._uU(1,"La operaci\xf3n puede ser compleja pero te ayudaremos \u26a0\ufe0f"),t.BQk())}function J(e,a){1&e&&(t.ynx(0),t._uU(1,"La operaci\xf3n es imposible de realizar \u{1f6ab}"),t.BQk())}function E(e,a){if(1&e&&(t.TgZ(0,"div",26),t.ynx(1,27),t.YNc(2,N,2,0,"ng-container",28),t.YNc(3,F,2,0,"ng-container",28),t.YNc(4,J,2,0,"ng-container",28),t.BQk(),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngSwitch",o.viability),t.xp6(1),t.Q6J("ngSwitchCase",o.operationViability.Viable),t.xp6(1),t.Q6J("ngSwitchCase",o.operationViability.Complex),t.xp6(1),t.Q6J("ngSwitchCase",o.operationViability.Impossible)}}function w(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.stepBack())}),t._uU(1,"Anterior"),t.qZA()}}function Q(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.stepForward())}),t._uU(1,"Siguiente"),t.qZA()}}function k(e,a){1&e&&t._UZ(0,"app-user-register")}var l=(()=>{return(e=l||(l={}))[e.Viable=0]="Viable",e[e.Complex=1]="Complex",e[e.Impossible=2]="Impossible",l;var e})();let b=(()=>{class e{constructor(){this.actualStep=1,this.operationViability=l,this.viability=l.Impossible,this.minFixInterest=A.b.fixed,this.years=30,this.monthly=0,this.oldMonthly=0,this.total=0}ngOnInit(){this.initForm()}initForm(){const o={leftMortgage:new n.NI("",[n.kI.required]),monthlyMortgage:new n.NI("",[n.kI.required]),totalMortgage:new n.NI("",[n.kI.required]),leftDebts:new n.NI("",[n.kI.required]),monthlyDebts:new n.NI("",[n.kI.required]),age:new n.NI("",[n.kI.required]),monthlyEarnings:new n.NI("",[n.kI.required]),numberOfPays:new n.NI("",[n.kI.required]),contractType:new n.NI("",[n.kI.required])};this.formGroup=new n.cw(o),this.filteredContractTypeListener()}filteredContractTypeListener(){this.filteredContractType=this.formGroup.controls.contractType.valueChanges.pipe((0,I.O)(""),(0,_.U)(o=>this._filterContractType(o||"")))}_filterContractType(o){const i=o.toLowerCase();return x.filter(s=>s.toLowerCase().includes(i))}stepForward(){3===this.actualStep?this.calcOperation():this.resetValues(),this.actualStep++}stepBack(){this.actualStep--,this.resetValues()}resetValues(){this.viability=l.Impossible,this.oldMonthly=0,this.monthly=0,this.total=0}calcOperation(){this.viability=l.Viable;const o=this.formGroup.controls;if(o.age.value.toString()>"60")return void(this.viability=l.Impossible);const s=o.leftMortgage.value+o.leftDebts.value,m=o.totalMortgage.value,f=.9*m;if(s>=.8*m&&s<=f)this.viability=l.Complex;else if(s>f)return void(this.viability=l.Impossible);const p=o.contractType.value;if("Indefinido"!==p&&"Aut\xf3nomo"!==p&&"Funcionario"!==p)return void(this.viability=l.Impossible);const h=o.monthlyDebts.value+o.monthlyMortgage.value,T=o.monthlyEarnings.value,U=.45*T;if(h>=.33*T&&h<=U)this.viability=l.Complex;else if(h>U)return void(this.viability=l.Impossible);this.calcTotalMortgage(o.leftMortgage.value,o.monthlyMortgage.value,o.leftDebts.value,o.monthlyDebts.value)}calcTotalMortgage(o,i,s,m){const f=Math.floor(Math.max(o/i,s/m)),d=this.minFixInterest/100/12,p=o+s;this.oldMonthly=Math.round(i+m),this.monthly=Math.round(p*d/(1-Math.pow(1+d,-f))),this.total=Math.round(this.oldMonthly-this.monthly)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-debt-unifier-simulator"]],decls:12,vars:12,consts:[[1,"flex","w-full","desktop:flex-row","mobile:flex-col","pt-10","desktop:space-x-5","mobile:space-y-5","px-5"],[1,"flex","desktop:w-1/2","mobile:w-full","flex-column",3,"formGroup"],["class","flex flex-column",4,"ngIf"],["class","flex items-center justify-center w-full py-10 flex-column",4,"ngIf"],[1,"flex","justify-between"],["class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",3,"click",4,"ngIf"],[1,"flex","desktop:w-1/2","mobile:w-full","flex-column"],[3,"monthly","total","viability","oldMonthly"],[4,"ngIf"],[1,"flex","flex-column"],[1,"mat-form-field-title","font-hint"],["formControlName","leftMortgage","matInput","","mask","separator","thousandSeparator","."],["matSuffix",""],["formControlName","monthlyMortgage","matInput","","mask","separator","thousandSeparator","."],["formControlName","totalMortgage","matInput","","mask","separator","thousandSeparator","."],["formControlName","leftDebts","matInput","","mask","separator","thousandSeparator","."],["formControlName","monthlyDebts","matInput","","mask","separator","thousandSeparator","."],["formControlName","age","matInput","","type","number"],["formControlName","monthlyEarnings","matInput","","mask","separator","thousandSeparator","."],["formControlName","numberOfPays","matInput","","type","number"],["appearance","fill"],["type","text","matInput","","formControlName","contractType",3,"matAutocomplete"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","items-center","justify-center","w-full","py-10","flex-column"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-full",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.YNc(2,S,25,0,"div",2),t.YNc(3,q,17,0,"div",2),t.YNc(4,M,37,4,"div",2),t.YNc(5,E,5,4,"div",3),t.TgZ(6,"div",4),t.YNc(7,w,2,0,"button",5),t.YNc(8,Q,2,0,"button",5),t.qZA()(),t.TgZ(9,"div",6),t._UZ(10,"app-debts-payments",7),t.YNc(11,k,1,0,"app-user-register",8),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngIf",1===i.actualStep),t.xp6(1),t.Q6J("ngIf",2===i.actualStep),t.xp6(1),t.Q6J("ngIf",3===i.actualStep),t.xp6(1),t.Q6J("ngIf",4===i.actualStep),t.xp6(2),t.Q6J("ngIf",i.actualStep>=2),t.xp6(1),t.Q6J("ngIf",i.actualStep<4),t.xp6(2),t.Q6J("monthly",i.monthly)("total",i.total)("viability",i.viability)("oldMonthly",i.oldMonthly),t.xp6(1),t.Q6J("ngIf",i.viability!==i.operationViability.Impossible&&4===i.actualStep))}}),e})();var Z=r(3104);const B=[{path:"",component:b}];let V=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Z.Bz.forChild(B),Z.Bz]}),e})();var c=r(7322),j=r(7446),v=r(7531),C=r(1470),g=r(9815),L=r(6690);let O=(()=>{class e{constructor(){this.operationViability=l,this.viability=l.Impossible,this.monthly=0,this.oldMonthly=0,this.total=0}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-debts-payments"]],inputs:{viability:"viability",monthly:"monthly",oldMonthly:"oldMonthly",total:"total"},decls:19,vars:14,consts:[[1,"p-6","space-y-4",3,"ngClass"],[1,"flex","justify-between"],[1,"text-2xl",3,"ngClass"],[1,"text-red-600"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Tu nueva cuota mensual"),t.qZA(),t.TgZ(4,"h1",2),t._uU(5),t.ALo(6,"number"),t.qZA()(),t.TgZ(7,"div",1)(8,"h1",2),t._uU(9,"Ahorro mensual"),t.qZA(),t.TgZ(10,"h1",2),t._uU(11),t.ALo(12,"number"),t.qZA()(),t.TgZ(13,"div",1)(14,"span",3),t._uU(15,"Tu antigua cuota mensual:"),t.qZA(),t.TgZ(16,"h1",3),t._uU(17),t.ALo(18,"number"),t.qZA()()()),2&o&&(t.Q6J("ngClass",i.viability!==i.operationViability.Impossible?"bg-green-100":"bg-red-100"),t.xp6(2),t.Q6J("ngClass",i.viability!==i.operationViability.Impossible?"text-green-500":"text-red-600"),t.xp6(2),t.Q6J("ngClass",i.viability!==i.operationViability.Impossible?"text-green-500":"text-red-600"),t.xp6(1),t.hij("",t.lcZ(6,8,i.monthly)," \u20ac"),t.xp6(3),t.Q6J("ngClass",i.viability!==i.operationViability.Impossible?"text-green-500":"text-red-600"),t.xp6(2),t.Q6J("ngClass",i.viability!==i.operationViability.Impossible?"text-green-500":"text-red-600"),t.xp6(1),t.hij("",t.lcZ(12,10,i.total)," \u20ac"),t.xp6(6),t.hij("",t.lcZ(18,12,i.oldMonthly)," \u20ac"))},dependencies:[u.mk,u.JJ]}),e})();var P=r(508),Y=r(2744);let G=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,V,n.UX,c.lN,j.p9,v.c,C.yI,g.Bb,L.J]}),e})();t.B6R(b,[u.sg,u.O5,u.RF,u.n9,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,c.TO,c.KE,c.R9,v.Nt,C.hx,g.XC,g.ZL,P.ey,Y.a,O],[u.Ov])}}]);